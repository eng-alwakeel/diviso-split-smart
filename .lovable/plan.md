
# ุฎุทุฉ ุชูุงูู ุงููุฑุฏ ูุน ุดุงุช ุงููุฌููุนุฉ

## ูุธุฑุฉ ุนุงูุฉ

ุฅุถุงูุฉ ููุฒุฉ ุชูุงุนููุฉ ุชุณูุญ ูููุณุชุฎุฏููู ุจุฑูู ุงููุฑุฏ ุฏุงุฎู ุดุงุช ุงููุฌููุนุฉุ ูุน ุฅููุงููุฉ ุงูุชุตููุช ูุงูุงุนุชูุงุฏ ุงูุฌูุงุนูุ ุซู ุงูุงูุชูุงู ูุจุงุดุฑุฉ ูุชูุณูู ุงูุชูููุฉ.

---

## ุงูุชุบููุฑุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 1. ุฌุฏูู ุฌุฏูุฏ: `dice_decisions`

```sql
CREATE TABLE public.dice_decisions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  group_id UUID NOT NULL REFERENCES public.groups(id) ON DELETE CASCADE,
  created_by UUID NOT NULL REFERENCES auth.users(id),
  dice_type TEXT NOT NULL CHECK (dice_type IN ('activity', 'food', 'quick')),
  results JSONB NOT NULL, -- [{faceId, emoji, labelAr, labelEn}]
  status TEXT NOT NULL DEFAULT 'open' CHECK (status IN ('open', 'accepted', 'rerolled', 'expired')),
  votes JSONB NOT NULL DEFAULT '[]'::JSONB, -- array of user_ids who voted
  rerolled_from UUID REFERENCES public.dice_decisions(id), -- ููุฑุจุท ูุน ุงููุฑุงุฑ ุงูุฃุตูู
  created_at TIMESTAMPTZ NOT NULL DEFAULT now(),
  accepted_at TIMESTAMPTZ,
  CONSTRAINT one_open_per_group UNIQUE (group_id, status) -- ููุน ูุฑุงุฑ ููุชูุญ ูุชุนุฏุฏ
);
```

### 2. ุชุนุฏูู ุฌุฏูู `messages`

ุฅุถุงูุฉ ุนููุฏ ุงุฎุชูุงุฑู ูุฑุจุท ุงูุฑุณุงูุฉ ุจูุฑุงุฑ ุงููุฑุฏ:

```sql
ALTER TABLE public.messages 
ADD COLUMN message_type TEXT DEFAULT 'text' CHECK (message_type IN ('text', 'dice_decision')),
ADD COLUMN dice_decision_id UUID REFERENCES public.dice_decisions(id);
```

### 3. ุณูุงุณุงุช RLS

```sql
-- ูุฑุงุกุฉ: ุฃุนุถุงุก ุงููุฌููุนุฉ ููุท
CREATE POLICY "Members can view dice decisions" ON dice_decisions
  FOR SELECT USING (
    EXISTS (
      SELECT 1 FROM group_members 
      WHERE group_id = dice_decisions.group_id 
      AND user_id = auth.uid()
    )
  );

-- ุฅูุดุงุก: ุฃุนุถุงุก ุงููุฌููุนุฉ ููุท
CREATE POLICY "Members can create dice decisions" ON dice_decisions
  FOR INSERT WITH CHECK (
    EXISTS (
      SELECT 1 FROM group_members 
      WHERE group_id = dice_decisions.group_id 
      AND user_id = auth.uid()
    ) AND created_by = auth.uid()
  );

-- ุชุญุฏูุซ: ููุชุตููุช ูุชุบููุฑ ุงูุญุงูุฉ
CREATE POLICY "Members can update dice decisions" ON dice_decisions
  FOR UPDATE USING (
    EXISTS (
      SELECT 1 FROM group_members 
      WHERE group_id = dice_decisions.group_id 
      AND user_id = auth.uid()
    )
  );
```

---

## ุงูููููุงุช ุงูุฌุฏูุฏุฉ

### 1. ุฒุฑ ุงููุฑุฏ ูู ุดุฑูุท ุงูุดุงุช

**ุงูููู:** `src/components/chat/ChatDiceButton.tsx`

ุฒุฑ ๐ฒ ุจุฌุงูุจ ุฒุฑ ุงูุฅุฑุณุงู ููุชุญ Bottom Sheet:

```text
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุงูุชุจ ุฑุณุงูุฉ...          [๐ฒ] [ุฅุฑุณุงู]   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### 2. Bottom Sheet ูุงุฎุชูุงุฑ ุงููุฑุฏ

**ุงูููู:** `src/components/chat/DiceChatSheet.tsx`

```text
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ           ุฎูู ุงููุฑุฏ ููุฑุฑ ๐ฒ            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โก ูุฑุงุฑ ุณุฑูุน (ูุดุงุท + ุฃูู)              โ
โ  ๐ฏ ูุฑุฏ ุงููุดุงุท                          โ
โ  ๐ฝ๏ธ ูุฑุฏ ุงูุฃูู                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ        [ ุงุฑูู ุงูุขู ๐ฒ ]                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### 3. ุจุทุงูุฉ ูุฑุงุฑ ุงููุฑุฏ ูู ุงูุดุงุช

**ุงูููู:** `src/components/chat/messages/DiceDecisionMessage.tsx`

```text
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ๐ฒ ุงููุฑุฏ ูุฑุฑ!                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ           ๐๏ธ ููุงุก ุทูู / ุจุฑ             โ
โ           ๐ ุฃููุฉ ุฑุฒ                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  2/5 ููุงูู                              โ
โ                                         โ
โ  [๐ ุงุนุชูุงุฏ]  [๐ ุฅุนุงุฏุฉ]               โ
โ                                         โ
โ  * ุธููุฑ [โ ูุณูู ุงูุขู] ุจุนุฏ ุงูุงุนุชูุงุฏ    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ุงููููุงุช ุงูุฌุฏูุฏุฉ ูุงููุนุฏูุฉ

| ุงูููู | ุงูููุน | ุงููุตู |
|-------|-------|-------|
| `src/components/chat/ChatDiceButton.tsx` | ุฌุฏูุฏ | ุฒุฑ ุงููุฑุฏ ูู ุดุฑูุท ุงูุดุงุช |
| `src/components/chat/DiceChatSheet.tsx` | ุฌุฏูุฏ | Bottom Sheet ูุงุฎุชูุงุฑ ูุฑูู ุงููุฑุฏ |
| `src/components/chat/messages/DiceDecisionMessage.tsx` | ุฌุฏูุฏ | ุนุฑุถ ุจุทุงูุฉ ุงููุฑุงุฑ ูู ุงูุดุงุช |
| `src/services/diceChatService.ts` | ุฌุฏูุฏ | ุฎุฏูุฉ ุงูุชุนุงูู ูุน ูุฑุงุฑุงุช ุงููุฑุฏ |
| `src/hooks/useDiceChatDecision.ts` | ุฌุฏูุฏ | Hook ููุชุตููุช ูุงูุฅุฏุงุฑุฉ |
| `src/components/group/GroupChat.tsx` | ุชุนุฏูู | ุฅุถุงูุฉ ุฒุฑ ุงููุฑุฏ + ุนุฑุถ ุฑุณุงุฆู ุงููุฑุฏ |
| `src/hooks/useGroupNotifications.ts` | ุชุนุฏูู | ุฅุถุงูุฉ ุฅุดุนุงุฑุงุช ุงููุฑุฏ |
| `src/i18n/locales/ar/dice.json` | ุชุนุฏูู | ุฅุถุงูุฉ ุชุฑุฌูุงุช ุงูุดุงุช |
| `src/i18n/locales/en/dice.json` | ุชุนุฏูู | ุฅุถุงูุฉ ุชุฑุฌูุงุช ุงูุดุงุช |
| `src/i18n/locales/ar/notifications.json` | ุชุนุฏูู | ุฅุถุงูุฉ ุฃููุงุน ุฅุดุนุงุฑุงุช ุงููุฑุฏ |
| `src/hooks/useAnalyticsEvents.ts` | ุชุนุฏูู | ุฅุถุงูุฉ ุฃุญุฏุงุซ ุฌุฏูุฏุฉ |

---

## ุฎุฏูุฉ ุฅุฏุงุฑุฉ ูุฑุงุฑุงุช ุงููุฑุฏ

**ุงูููู:** `src/services/diceChatService.ts`

```typescript
interface DiceChatService {
  // ุฅูุดุงุก ูุฑุงุฑ ุฌุฏูุฏ
  createDecision(groupId: string, diceType: string, results: DiceFace[]): Promise<void>;
  
  // ุงูุชุตููุช
  vote(decisionId: string): Promise<void>;
  removeVote(decisionId: string): Promise<void>;
  
  // ุฅุนุงุฏุฉ ุงูุฑูู
  reroll(decisionId: string): Promise<void>;
  
  // ุงูุชุญูู ูู ูุฌูุฏ ูุฑุงุฑ ููุชูุญ
  hasOpenDecision(groupId: string): Promise<boolean>;
  
  // ุงูุญุตูู ุนูู ูุณุจุฉ ุงูุชุตููุช ุงููุทููุจุฉ
  getVoteThreshold(memberCount: number): number; // 60%
}
```

---

## ููุทู ุงูุชุตููุช ูุงูุงุนุชูุงุฏ

### ููุงุนุฏ ุงูุชุตููุช
- ูู ุนุถู ูุตููุช ูุฑุฉ ูุงุญุฏุฉ (toggle)
- ุงูุชุตููุช ุจุงูุถุบุท ุนูู ๐
- ุฅูุบุงุก ุงูุชุตููุช ุจุงูุถุบุท ูุฑุฉ ุซุงููุฉ

### ูุณุจุฉ ุงูุงุนุชูุงุฏ
- **60%** ูู ุฃุนุถุงุก ุงููุฌููุนุฉ
- ูุซุงู: 5 ุฃุนุถุงุก = 3 ุฃุตูุงุช ูุทููุจุฉ

### ุงูุงุนุชูุงุฏ ุงูุชููุงุฆู
```typescript
function checkAutoAccept(votes: number, memberCount: number): boolean {
  const threshold = Math.ceil(memberCount * 0.6);
  return votes >= threshold;
}
```

### ูุงุนุฏุฉ "ูุฑุงุฑ ูุงุญุฏ ููุชูุญ"
- ูุง ููุณูุญ ุจูุฑุงุฑ ุฌุฏูุฏ ุฅุฐุง ููุฌุฏ ูุฑุงุฑ ููุชูุญ
- ุฑุณุงูุฉ ูููุณุชุฎุฏู: "ููู ูุฑุงุฑ ููุชูุญ... ุตููุชูุง ุนููู ุฃูู ๐"

---

## ููุทู ุฅุนุงุฏุฉ ุงูุฑูู

**ุงูุฎูุงุฑ ุงูููุฎุชุงุฑ:** ุฅุนุงุฏุฉ ูุงุญุฏุฉ ููุจุทุงูุฉ ูููุง

- ุฒุฑ ๐ ูุธูุฑ ูุฌููุน ุงูุฃุนุถุงุก
- ูุนูู ูุฑุฉ ูุงุญุฏุฉ ููุท
- ุนูุฏ ุงูุถุบุท:
  1. `status = 'rerolled'` ูููุฑุงุฑ ุงููุฏูู
  2. ุฅูุดุงุก ูุฑุงุฑ ุฌุฏูุฏ ูุน `rerolled_from`
  3. ุฅุฑุณุงู ุฑุณุงูุฉ ุฌุฏูุฏุฉ ูู ุงูุดุงุช

---

## ุงูุฑุจุท ูุน "ูุณูู ุงูุขู"

ุจุนุฏ ุงูุงุนุชูุงุฏ (`status = 'accepted'`):

1. ูุธูุฑ ุฒุฑ **โ ูุณูู ุงูุขู**
2. ุนูุฏ ุงูุถุบุทุ ููุชูู ุฅูู `/add-expense`
3. ูููุฃ ุงูุนููุงู ุชููุงุฆูุงู:

```typescript
function generateExpenseTitle(dualResult: DualDiceResult): string {
  const activity = dualResult.activity.face.labelAr;
  const food = dualResult.food.face.labelAr;
  return `${activity} โ ${food}`; // "ูุทุนู โ ุฃููุฉ ุฑุฒ"
}

function generateSingleTitle(result: DiceResult): string {
  return `ุทูุนุฉ โ ${result.face.labelAr}`; // "ุทูุนุฉ โ ูุงููู"
}
```

---

## ูุธุงู ุงูุฅุดุนุงุฑุงุช

### ุฃููุงุน ุงูุฅุดุนุงุฑุงุช ุงูุฌุฏูุฏุฉ

| ุงูููุน | ุงูุฑุณุงูุฉ |
|-------|---------|
| `dice_posted` | ๐ฒ ูุฑุงุฑ ุฌุฏูุฏ ูู "{ุงุณู ุงููุฌููุนุฉ}" - ุตููุชูุง ูุงุนุชูุฏูุง! |
| `dice_accepted` | โ ุชู ุงุนุชูุงุฏ ุงููุฑุงุฑ ูู "{ุงุณู ุงููุฌููุนุฉ}" |
| `dice_rerolled` | ๐ ุชู ุฅุนุงุฏุฉ ุงูุฑูู ูู "{ุงุณู ุงููุฌููุนุฉ}" |

### ุฅุถุงูุฉ ููุชุฑุฌูุงุช

```json
// notifications.json
{
  "types": {
    "dice_posted": "๐ฒ ูุฑุงุฑ ุฌุฏูุฏ ูู \"{{group}}\" - ุตููุชูุง ูุงุนุชูุฏูุง!",
    "dice_accepted": "โ ุชู ุงุนุชูุงุฏ ุงููุฑุงุฑ ูู \"{{group}}\"",
    "dice_rerolled": "๐ ุชู ุฅุนุงุฏุฉ ุงูุฑูู ูู \"{{group}}\""
  },
  "titles": {
    "dice_posted": "ูุฑุงุฑ ุฌุฏูุฏ ๐ฒ",
    "dice_accepted": "ุชู ุงูุงุนุชูุงุฏ โ",
    "dice_rerolled": "ุฅุนุงุฏุฉ ุงูุฑูู ๐"
  }
}
```

---

## ุฃุญุฏุงุซ Analytics ุงูุฌุฏูุฏุฉ

| ุงูุญุฏุซ | ุงููุตู |
|-------|-------|
| `dice_posted_to_chat` | ูุดุฑ ูุฑุงุฑ ูู ุงูุดุงุช |
| `dice_vote_cast` | ุชุตููุช ุนูู ูุฑุงุฑ |
| `dice_accepted_in_chat` | ุงุนุชูุงุฏ ูุฑุงุฑ ูู ุงูุดุงุช |
| `dice_rerolled_in_chat` | ุฅุนุงุฏุฉ ุฑูู ูู ุงูุดุงุช |
| `split_started_from_dice_chat` | ุจุฏุก ุชูุณูู ูู ูุฑุงุฑ ุงูุดุงุช |

---

## ุชุนุฏูู GroupChat.tsx

### ุงูุชุบููุฑุงุช ุงููุทููุจุฉ

1. **ุงุณุชูุฑุงุฏ ุงูููููุงุช ุงูุฌุฏูุฏุฉ:**
```typescript
import { ChatDiceButton } from "@/components/chat/ChatDiceButton";
import { DiceDecisionMessage } from "@/components/chat/messages/DiceDecisionMessage";
```

2. **ุชุญุฏูุซ ูุงุฌูุฉ Message:**
```typescript
interface Message {
  id: string;
  content: string;
  created_at: string;
  sender_id: string;
  group_id: string;
  message_type: 'text' | 'dice_decision';
  dice_decision_id?: string;
}
```

3. **ุชุนุฏูู ุนุฑุถ ุงูุฑุณุงุฆู:**
```tsx
{messages.map((m) => (
  m.message_type === 'dice_decision' && m.dice_decision_id
    ? <DiceDecisionMessage key={m.id} decisionId={m.dice_decision_id} groupId={groupId} />
    : <MessageBubble key={m.id} message={m} profiles={profiles} />
))}
```

4. **ุฅุถุงูุฉ ุฒุฑ ุงููุฑุฏ:**
```tsx
<div className="flex gap-2">
  <Input ... />
  <ChatDiceButton groupId={groupId} onDecisionCreated={scrollToBottom} />
  <Button onClick={sendMessage} ...>
    <Send />
  </Button>
</div>
```

---

## ุชุฏูู ุงูุนูู (Workflow)

```text
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    ุชุฏูู ูุฑุงุฑ ุงููุฑุฏ ูู ุงูุดุงุช                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                                  โ
โ  [๐ฒ] โ ุงููุณุชุฎุฏู ูุถุบุท ุฒุฑ ุงููุฑุฏ                                  โ
โ    โ                                                             โ
โ    โผ                                                             โ
โ  โโโโโโโโโโโโโโโโโโโโโโโ                                         โ
โ  โ  ูู ููุฌุฏ ูุฑุงุฑ       โ โโูุนูโโโบ "ููู ูุฑุงุฑ ููุชูุญ" โ             โ
โ  โ  ููุชูุญุ             โ                                         โ
โ  โโโโโโโโโโโโโโโโโโโโโโโ                                         โ
โ    โ ูุง                                                          โ
โ    โผ                                                             โ
โ  โโโโโโโโโโโโโโโโโโโโโโโ                                         โ
โ  โ  Bottom Sheet       โ                                         โ
โ  โ  ุงุฎุชูุงุฑ ุงููุฑุฏ       โ                                         โ
โ  โโโโโโโโโโโโโโโโโโโโโโโ                                         โ
โ    โ                                                             โ
โ    โผ                                                             โ
โ  [ ุงุฑูู ุงูุขู ] โ ุงูุฑูู                                          โ
โ    โ                                                             โ
โ    โผ                                                             โ
โ  โโโโโโโโโโโโโโโโโโโโโโโ                                         โ
โ  โ  ุฅูุดุงุก dice_decisionโ                                         โ
โ  โ  + message          โ                                         โ
โ  โโโโโโโโโโโโโโโโโโโโโโโ                                         โ
โ    โ                                                             โ
โ    โผ                                                             โ
โ  [ุฅุดุนุงุฑ ูุฃุนุถุงุก ุงููุฌููุนุฉ] ๐                                     โ
โ    โ                                                             โ
โ    โผ                                                             โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ              ุจุทุงูุฉ ุงููุฑุงุฑ ูู ุงูุดุงุช                          โ โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ โ
โ  โ  โ  ๐ฒ ุงููุฑุฏ ูุฑุฑ!                                      โ    โ โ
โ  โ  โ  ๐๏ธ ููุงุก ุทูู  ๐ ุฃููุฉ ุฑุฒ                            โ    โ โ
โ  โ  โ  0/5 ููุงูู                                          โ    โ โ
โ  โ  โ  [๐ ุงุนุชูุงุฏ]  [๐ ุฅุนุงุฏุฉ]                            โ    โ โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ    โ                                                             โ
โ    โโโโบ [๐] โ ุชุตููุช (toggle)                                   โ
โ    โ      โ                                                      โ
โ    โ      โผ                                                      โ
โ    โ    votes >= 60%?                                           โ
โ    โ      โ ูุนู                                                  โ
โ    โ      โผ                                                      โ
โ    โ    status = 'accepted' + ุฅุดุนุงุฑ โ                          โ
โ    โ      โ                                                      โ
โ    โ      โผ                                                      โ
โ    โ    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ       โ
โ    โ    โ  โ ุชู ุงูุงุนุชูุงุฏ!                              โ       โ
โ    โ    โ  [โ ูุณูู ุงูุขู]                               โ       โ
โ    โ    โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ       โ
โ    โ      โ                                                      โ
โ    โ      โผ                                                      โ
โ    โ    /add-expense?title=...&groupId=...                      โ
โ    โ                                                             โ
โ    โโโโบ [๐] โ ุฅุนุงุฏุฉ ุงูุฑูู (ูุฑุฉ ูุงุญุฏุฉ)                          โ
โ           โ                                                      โ
โ           โผ                                                      โ
โ         status = 'rerolled'                                      โ
โ         + ุฅูุดุงุก ูุฑุงุฑ ุฌุฏูุฏ                                       โ
โ         + ุฅุดุนุงุฑ ๐                                              โ
โ                                                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ุฎุทูุงุช ุงูุชูููุฐ

### ุงูุฎุทูุฉ 1: ูุงุนุฏุฉ ุงูุจูุงูุงุช
1. ุฅูุดุงุก ุฌุฏูู `dice_decisions`
2. ุชุนุฏูู ุฌุฏูู `messages`
3. ุฅุถุงูุฉ ุณูุงุณุงุช RLS
4. ุชูููู Realtime

### ุงูุฎุทูุฉ 2: ุงูุฎุฏูุงุช ูุงูู Hooks
1. ุฅูุดุงุก `diceChatService.ts`
2. ุฅูุดุงุก `useDiceChatDecision.ts`
3. ุชุญุฏูุซ `useAnalyticsEvents.ts`
4. ุชุญุฏูุซ `useGroupNotifications.ts`

### ุงูุฎุทูุฉ 3: ุงูููููุงุช
1. ุฅูุดุงุก `ChatDiceButton.tsx`
2. ุฅูุดุงุก `DiceChatSheet.tsx`
3. ุฅูุดุงุก `DiceDecisionMessage.tsx`
4. ุชุนุฏูู `GroupChat.tsx`

### ุงูุฎุทูุฉ 4: ุงูุชุฑุฌูุงุช
1. ุชุญุฏูุซ `dice.json`
2. ุชุญุฏูุซ `notifications.json`

### ุงูุฎุทูุฉ 5: ุงูุงุฎุชุจุงุฑ
1. ุงุฎุชุจุงุฑ ุฅูุดุงุก ูุฑุงุฑ ุฌุฏูุฏ
2. ุงุฎุชุจุงุฑ ุงูุชุตููุช ูุงูุงุนุชูุงุฏ ุงูุชููุงุฆู
3. ุงุฎุชุจุงุฑ ุฅุนุงุฏุฉ ุงูุฑูู
4. ุงุฎุชุจุงุฑ ุงูุฅุดุนุงุฑุงุช
5. ุงุฎุชุจุงุฑ ุงูุฑุจุท ูุน AddExpense

---

## ููุงุญุธุงุช ุชูููุฉ

### Realtime ููุชุญุฏูุซุงุช
- ุงูุงุดุชุฑุงู ูู ุชุบููุฑุงุช `dice_decisions`
- ุชุญุฏูุซ UI ููุฑู ุนูุฏ ุงูุชุตููุช

### ุชุญุณูู ุงูุฃุฏุงุก
- ุงุณุชุฎุฏุงู `useMemo` ููุญุณุงุจุงุช
- ุชุญููู ุงูุจูุงูุงุช ุนูุฏ ุงูุญุงุฌุฉ ููุท

### ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- ุฑุณุงุฆู ูุงุถุญุฉ ูููุณุชุฎุฏู
- Fallback ุนูุฏ ูุดู ุงูุนูููุงุช

