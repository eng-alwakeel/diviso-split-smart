
# ุชุทููุฑ ูุฑุช ุงููุฌููุนุฉ ูุชุฌุฑุจุฉ ุงูุชูููู

## ููุฎุต

ุชูุญูุฏ ูุฑุช ุงููุฌููุนุฉ (`GroupCard`) ููุนูู ุจุญุงูุชูู (`compact` ู `expanded`)ุ ุฅุถุงูุฉ ุนุฑุถ ูุงุถุญ ูุญุงูุฉ ุงููุฌููุนุฉ (ูุดุทุฉ/ูุบููุฉ) ูุฏูุฑ ุงููุณุชุฎุฏูุ ุฅุฎูุงุก ุงูุฃุฒุฑุงุฑ ุงูุฎุทุฑุฉ ุฏุงุฎู ูุงุฆูุฉ (...)ุ ูุชุญุณูู ุงูุชูููู.

---

## ุงููุดุงูู ุงูุญุงููุฉ (ูู ุงูุตูุฑ ุงููุฑููุฉ)

| ุงููุดููุฉ | ุงููููุน |
|---------|--------|
| ุฒุฑ "ุญุฐู" ุฃุญูุฑ ุธุงูุฑ ุจุดูู ูุจุงุดุฑ | ุฏุงุฎู ุงููุฌููุนุฉ (expanded) |
| ุฒุฑ "ูุบุงุฏุฑุฉ" ุจุฅุทุงุฑ ุฃุญูุฑ ุธุงูุฑ ูุจุงุดุฑุฉ | ุฏุงุฎู ุงููุฌููุนุฉ (expanded) |
| ุญุงูุฉ ุงููุฌููุนุฉ (ูุบููุฉ) ุบูุฑ ุธุงูุฑุฉ ูู ุตูุญุฉ ุงููุฌููุนุงุช | ูุฑูุช ุงููุฌููุนุงุช (compact) |
| ุฏูุฑ ุงููุณุชุฎุฏู ูุง ููููุฒ ุจูู ูุงูู ููุดุฑู ูุนุถู | ููุง ุงูุญุงูุชูู |
| ุฒุฑ "ูุตุฑูู" ูุง ูุฎุชูู/ูุชุนุทู ูู ุงููุฌููุนุฉ ุงููุบููุฉ ุจุตูุญุฉ ุงููุฌููุนุงุช | compact card |
| ุฒุฑ ุงูุฑุฌูุน ูุฐูุจ ูููุญุฉ ุงูุชุญูู ููุท ูููุณ ูููุฌููุนุงุช | ุฏุงุฎู ุงููุฌููุนุฉ |
| ูุง ููุฌุฏ Component ููุญูุฏ ุจูู ุงูุญุงูุชูู | ูุนูุงุฑูุฉ ุงูููุฏ |

---

## 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุชุนุฏูู `useGroups.ts`

ุฅุถุงูุฉ `status` ู `group_type` ููู Group type ูุงูู query:

```text
ุงูุญุงูู:
  groups!inner (id, name, currency, owner_id, created_at, updated_at, archived_at)

ุงูุฌุฏูุฏ:
  groups!inner (id, name, currency, owner_id, created_at, updated_at, archived_at, status, group_type)
```

ุฅุถุงูุฉ ููู type:
```text
export type Group = {
  ...existing fields...
  status?: string;      // 'active' | 'closed'
  group_type?: string;  // trip/home/work/...
};
```

---

## 2. ูููุงุช ุฌุฏูุฏุฉ

### `src/components/group/GroupCard.tsx`

Component ููุญูุฏ ูุนูู ุจุญุงูุชูู:

**Props:**
```text
interface GroupCardProps {
  group: GroupData;          // ุจูุงูุงุช ุงููุฌููุนุฉ
  variant: 'compact' | 'expanded';  // ุงูุญุงูุฉ
  currentUserId: string | null;
  // Compact-only props
  onNavigate?: (path: string) => void;
  onArchive?: (groupId: string) => void;
  onDelete?: (groupId: string, name: string, ownerId: string) => void;
  onLeave?: (groupId: string, name: string, ownerId: string) => void;
  isArchived?: boolean;
  // Expanded-only props
  onAddExpense?: () => void;
  onOpenReport?: () => void;
  onOpenSettings?: () => void;
  onCloseGroup?: () => void;
  onDeleteGroup?: () => void;
  onLeaveGroup?: () => void;
  memberCount?: number;
  totalExpenses?: number;
  currencyLabel?: string;
  isLoading?: boolean;
}
```

**Compact layout (ุตูุญุฉ ุงููุฌููุนุงุช):**

```text
+------------------------------------------+
|  ุงุณู ุงููุฌููุนุฉ (Bold)                     |
|  [๐ข ูุดุทุฉ] [๐ ูุงูู]  ุฃู  [๐ ูุบููุฉ]   |
|  ๐ฅ 3 ุฃุนุถุงุก  โข  ๐ฐ SAR                   |
|  [ุนุฑุถ] [ูุตุฑูู*] [...]                    |
+------------------------------------------+
* ูุตุฑูู: ูุฎุชูู ุฅุฐุง ุงููุฌููุนุฉ ูุบููุฉ
* ูุงุฆูุฉ (...): ุฅุนุฏุงุฏุงุชุ ุฃุฑุดูุฉุ ุญุฐู/ูุบุงุฏุฑุฉ
```

**Expanded layout (ุฏุงุฎู ุงููุฌููุนุฉ):**

```text
+------------------------------------------+
|  Avatar  ุงุณู ุงููุฌููุนุฉ                     |
|         [ุนุงู] [๐ข ูุดุทุฉ] [๐ ูุงูู]        |
|         ๐ฅ 3 ุฃุนุถุงุก  โข  ๐ฐ 500 SAR         |
|  [โ ูุตุฑูู*] [๐ ุชูุฑูุฑ] [โ๏ธ ุฅุนุฏุงุฏุงุช]    |
|  [๐ ุฅููุงุก ุงููุดุงุท**]  [...]              |
+------------------------------------------+
* ูุตุฑูู: Disabled + Tooltip ุฅุฐุง ูุบููุฉ
** ุฅููุงุก ุงููุดุงุท: ูุธูุฑ ููุท ูู admin/owner + ูุดุทุฉ
* ูุงุฆูุฉ (...): ุญุฐู/ูุบุงุฏุฑุฉ (ุจุฏูู ููู ุฃุญูุฑ ุฎุงุฑุฌ ุงููุงุฆูุฉ)
```

### ุชุตููู Badges

| Badge | ุงูุดูู | ุงูููู |
|-------|-------|------|
| ๐ข ูุดุทุฉ | Badge outline ุฃุฎุถุฑ | `bg-green-500/10 text-green-600 border-green-500/30` |
| ๐ ูุบููุฉ | Badge ูุน ุฃููููุฉ ููู | `bg-amber-500/10 text-amber-600 border-amber-500/30` |
| ๐ ูุงูู | Badge ุฐูุจู | `bg-yellow-500/10 text-yellow-700 border-yellow-500/30` |
| ๐ก๏ธ ูุดุฑู | Badge ุฃุฒุฑู | `bg-blue-500/10 text-blue-600 border-blue-500/30` |
| ๐ค ุนุถู | Badge ุนุงุฏู | `variant="outline"` |

---

## 3. ุงููููุงุช ุงููุนุฏูุฉ

### `src/hooks/useGroups.ts`

- ุฅุถุงูุฉ `status` ู `group_type` ูู ุงูู select query
- ุฅุถุงูุฉ ุงูุญููู ูู ุงูู return object
- ุชุญุฏูุซ ุงูู `Group` type

### `src/pages/MyGroups.tsx`

- ุญุฐู inline `GroupCard` function (ุณุทูุฑ 376-484)
- ุงุณุชูุฑุงุฏ `GroupCard` ูู `@/components/group/GroupCard`
- ุชูุฑูุฑ `variant="compact"` + group data ูุน `status` ู `group_type`
- ุชูุฑูุฑ `currentUserId` ูุชุญุฏูุฏ ุงูุฏูุฑ ุงูุตุญูุญ

### `src/pages/GroupDetails.tsx`

ุงูุชุนุฏููุงุช ุงูุฑุฆูุณูุฉ:

**1. ุฒุฑ ุงูุฑุฌูุน (ุณุทุฑ 453-461):**
```text
ุงูุญุงูู: "ุงูุนูุฏุฉ ูููุญุฉ ุงูุชุญูู" โ /dashboard
ุงูุฌุฏูุฏ: "ุงูุฑุฌูุน ุฅูู ุงููุฌููุนุงุช" โ /my-groups
```

**2. ุจุทุงูุฉ ุงููุฌููุนุฉ (ุณุทูุฑ 463-572):**
- ุงุณุชุจุฏุงู ูุงูู ุงูุจุทุงูุฉ ุจู `<GroupCard variant="expanded" ... />`
- ุฅุฒุงูุฉ ุฒุฑ "ุญุฐู" ุงูุฃุญูุฑ ุงููุจุงุดุฑ (ุณุทูุฑ 549-558)
- ุฅุฒุงูุฉ ุฒุฑ "ูุบุงุฏุฑุฉ" ุงูุฃุญูุฑ ุงููุจุงุดุฑ (ุณุทูุฑ 559-569)
- ููู ุญุฐู/ูุบุงุฏุฑุฉ ุฏุงุฎู ูุงุฆูุฉ (...) ูู GroupCard

**3. ุฅุฒุงูุฉ ุฃุฒุฑุงุฑ ุฎุทุฑุฉ ูุจุงุดุฑุฉ:**
- ูุง ูุธูุฑ ุฃู ุฒุฑ ุฃุญูุฑ (ุญุฐู/ูุบุงุฏุฑุฉ) ุฎุงุฑุฌ ูุงุฆูุฉ (...)
- ุงูุฅุฌุฑุงุกุงุช ุงูุฎุทุฑุฉ ุชุจูู ูู DropdownMenu ููุท

### `src/i18n/locales/ar/groups.json`

ุฅุถุงูุฉ ููุงุชูุญ ุฌุฏูุฏุฉ:
```text
"card": {
  ...existing keys...,
  "status_active": "ูุดุทุฉ",
  "status_closed": "ูุบููุฉ",
  "role_owner": "ุงููุงูู",
  "role_admin": "ูุดุฑู",
  "role_member": "ุนุถู",
  "closed_no_expense": "ุงููุฌููุนุฉ ูุบููุฉุ ูุง ูููู ุฅุถุงูุฉ ูุตุงุฑูู",
  "close_group": "ุฅููุงุก ุงููุดุงุท",
  "report": "ุชูุฑูุฑ",
  "add_expense": "ุฅุถุงูุฉ ูุตุฑูู",
  "back_to_groups": "ุงูุฑุฌูุน ุฅูู ุงููุฌููุนุงุช"
}
```

### `src/i18n/locales/en/groups.json`

ุฅุถุงูุฉ ููุณ ุงูููุงุชูุญ ุจุงูุฅูุฌููุฒูุฉ:
```text
"card": {
  ...existing keys...,
  "status_active": "Active",
  "status_closed": "Closed",
  "role_owner": "Owner",
  "role_admin": "Admin",
  "role_member": "Member",
  "closed_no_expense": "Group is closed, cannot add expenses",
  "close_group": "End Activity",
  "report": "Report",
  "add_expense": "Add Expense",
  "back_to_groups": "Back to Groups"
}
```

---

## 4. ุงูุชูุงุตูู ุงูุชูููุฉ

### ููุทู ุชุญุฏูุฏ ุงูุฏูุฑ

```text
function getUserRole(group, currentUserId):
  if currentUserId === group.owner_id:
    return 'owner'   // ๐ ูุงูู
  if group.member_role === 'admin':
    return 'admin'    // ๐ก๏ธ ูุดุฑู
  return 'member'     // ๐ค ุนุถู
```

### ููุทู ุฅุฎูุงุก/ุชุนุทูู ุฒุฑ ุงููุตุฑูู

```text
Compact (ุตูุญุฉ ุงููุฌููุนุงุช):
  if group.status === 'closed':
    ุฒุฑ "ูุตุฑูู" ูุง ูุธูุฑ ุฃุตูุง

Expanded (ุฏุงุฎู ุงููุฌููุนุฉ):
  if group.status === 'closed':
    ุฒุฑ "ุฅุถุงูุฉ ูุตุฑูู" = disabled
    tooltip = "ุงููุฌููุนุฉ ูุบููุฉุ ูุง ูููู ุฅุถุงูุฉ ูุตุงุฑูู"
```

### ููุทู ูุงุฆูุฉ ุงูุฅุฌุฑุงุกุงุช (DropdownMenu)

```text
Compact (...):
  - ุฅุนุฏุงุฏุงุช
  - ุฃุฑุดูุฉ/ุงุณุชุนุงุฏุฉ (admin ููุท)
  ---
  - ุญุฐู (owner ููุท) โ text-destructive ุฏุงุฎู ุงููุงุฆูุฉ ููุท
  - ูุบุงุฏุฑุฉ (member/admin) โ text-destructive ุฏุงุฎู ุงููุงุฆูุฉ ููุท

Expanded (...):
  - ุญุฐู (owner ููุท) โ text-destructive ุฏุงุฎู ุงููุงุฆูุฉ ููุท
  - ูุบุงุฏุฑุฉ (member/admin) โ text-destructive ุฏุงุฎู ุงููุงุฆูุฉ ููุท
```

### ููุงุนุฏ UX ุงูุญุงุณูุฉ

1. **ูุง ุฒุฑ ุฃุญูุฑ ุฎุงุฑุฌ ุงููุงุฆูุฉ**: ุญุฐู/ูุบุงุฏุฑุฉ ููุท ุฏุงุฎู DropdownMenu
2. **ุญุงูุฉ ุงููุฌููุนุฉ ุฏุงุฆูุง ูุฑุฆูุฉ**: ูู ุงููุฑุช compact ู expanded
3. **ุงูุฏูุฑ ุฏุงุฆูุง ูุฑุฆู**: Badge ุจููู ูููุฒ ุญุณุจ ุงูุฏูุฑ
4. **ุงูุชููู ูุงุถุญ**: ุฒุฑ ุฑุฌูุน ูุฐูุจ ูููุฌููุนุงุช (ููุณ Dashboard)
5. **Component ูุงุญุฏ**: `GroupCard` ูุณุชุฎุฏู ูู ูู ููุงู

---

## 5. ููุฎุต ุงููููุงุช

### ูููุงุช ุฌุฏูุฏุฉ

| ุงูููู | ุงููุตู |
|-------|------|
| `src/components/group/GroupCard.tsx` | Component ููุญูุฏ ุจุญุงูุชูู (compact/expanded) |

### ูููุงุช ูุนุฏูุฉ

| ุงูููู | ุงูุชุนุฏูู |
|-------|--------|
| `src/hooks/useGroups.ts` | ุฅุถุงูุฉ status + group_type ูู query ู type |
| `src/pages/MyGroups.tsx` | ุญุฐู inline GroupCard ูุงุณุชุฎุฏุงู ุงููููู ุงูุฌุฏูุฏ |
| `src/pages/GroupDetails.tsx` | ุงุณุชุจุฏุงู ุงูุจุทุงูุฉ + ุฒุฑ ุฑุฌูุน + ุฅุฒุงูุฉ ุฃุฒุฑุงุฑ ุฎุทุฑุฉ |
| `src/i18n/locales/ar/groups.json` | ุฅุถุงูุฉ ููุงุชูุญ ุงูุญุงูุฉ ูุงูุฏูุฑ |
| `src/i18n/locales/en/groups.json` | ุฅุถุงูุฉ ููุณ ุงูููุงุชูุญ ุจุงูุฅูุฌููุฒูุฉ |

---

## 6. ุญุงูุงุช ุทุฑููุฉ ูููุฉ

- ูุฌููุนุฉ ูุบููุฉ ูู ุงูุฃุฑุดูู: ุชุนุฑุถ badge "ูุบููุฉ" + badge "ูุคุฑุดูุฉ" ุฅุฐุง ูุฒู
- ูุณุชุฎุฏู owner ูู ูุฌููุนุฉ ูุบููุฉ: ูุธูุฑ "ุญุฐู" ูู ุงููุงุฆูุฉุ ูุง ูุธูุฑ "ุฅููุงุก ุงููุดุงุท"
- ูุณุชุฎุฏู member ุนุงุฏู: ูุง ูุฑู ุฃุฑุดูุฉ ููุง ุฅููุงุก ูุดุงุทุ ููุท ูุบุงุฏุฑุฉ
- ุฒุฑ ุฑุฌูุน: ุฅุฐุง ุฏุฎู ูู Dashboard ูุฑุฌุน ูู `/my-groups` (ููุณ Dashboard)
- Tooltip ุนูู ุฒุฑ ูุตุฑูู disabled: ูุนูู ุนูู mobile ู desktop
